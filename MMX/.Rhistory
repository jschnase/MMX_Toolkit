library(raster)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir <- paste0(mmx_home, "/base_collection")
sw_dir <- paste0(mmx_home, "/working_set")
mmx_home
bc_dir
sw_dir
list.files(bc_dir)
list.files(bc_dir, pattern="*1985*")
clr
clear
c
list.files(bc_dir, pattern="*1985*")
list.files(bc_dir, pattern="(1985)")
library(raster)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir   <- paste0(mmx_home, "/base_collection")
sw_dir   <- paste0(mmx_home, "/working_set")
year     <- 1985
ext      <- extent(-119, -97.1, 23.9, 40.8)
list.files(bc_dir, pattern="(1985)")
list.files(bc_dir, pattern="(year)")
list.files(bc_dir, pattern="year")
list.files(bc_dir, pattern="1985")
list.files(bc_dir, pattern=year)
list.files(bc_dir, pattern="year")
year     <- 1985
file <- list.files(bc_dir, pattern="year")
file
file <- list.files(bc_dir, pattern=$year)
file <- list.files(bc_dir, pattern="str(year)")
file
list.files(bc_dir, pattern="str(year)")
list.files(bc_dir, pattern=str(year))
list.files(bc_dir, pattern=(str(year))
)
list.files(bc_dir, pattern=1985)
list.files(bc_dir, pattern="1985")
str(year)
list.files(bc_dir, pattern=str(year))
list.files(bc_dir, pattern=(str(year)))
files <- list.files(bc_dir, pattern=1985
)
files <- list.files(bc_dir, pattern=(1985))
files <- list.files(bc_dir, pattern="1985"
)
files <- list.files(bc_dir, pattern="1985")
files
for (var in files) {
print("hi")
}
print(var)
for (var in files) {
print(var)
}
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
}
library(raster)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir   <- paste0(mmx_home, "/base_collection")
sw_dir   <- paste0(mmx_home, "/working_set")
year     <- 1985
ext      <- extent(-119, -97.1, 23.9, 40.8)
files <- list.files(bc_dir, pattern="1985")
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
}
install.packages("ncdf4")
library(ncdf4)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir   <- paste0(mmx_home, "/base_collection")
sw_dir   <- paste0(mmx_home, "/working_set")
year     <- 1985
ext      <- extent(-119, -97.1, 23.9, 40.8)
files <- list.files(bc_dir, pattern="1985")
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
}
r
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
s <- raster(r)
res(s) <- min(res(s))
s = resample(r, s,  method='bilinear')
}
r
s
library(raster)
library(ncdf4)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir   <- paste0(mmx_home, "/base_collection")
sw_dir   <- paste0(mmx_home, "/working_set")
year     <- 1985
ext      <- extent(-119, -97.1, 23.9, 40.8)
files <- list.files(bc_dir, pattern="1985")
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
s <- raster(r)
res(s) <- min(res(s))
s = resample(r, s,  method='bilinear')
c <- crop(s, ext)
r
s
c
writeRaster(c, filename=paste0(ws_dir, "/", var, ".asc"), format="ascii", overwrite=TRUE)
}
library(raster)
library(ncdf4)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir   <- paste0(mmx_home, "/base_collection")
ws_dir   <- paste0(mmx_home, "/working_set")
ext      <- extent(-119, -97.1, 23.9, 40.8)
# mask     <- raster(paste0("./", folder, "/mask.asc"))
files    <- list.files(bc_dir, pattern="1985")   # <<< insert year here!
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
s <- raster(r)
res(s) <- min(res(s))
s = resample(r, s,  method='bilinear')
c <- crop(s, ext)
# m <- mask(c, mask)
r
s
c
writeRaster(c, filename=paste0(ws_dir, "/", var, ".asc"), format="ascii", overwrite=TRUE)
}
library(raster)
library(ncdf4)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir   <- paste0(mmx_home, "/base_collection")
ws_dir   <- paste0(mmx_home, "/working_set")
ext      <- extent(-119, -97.1, 23.9, 40.8)
library(raster)
library(ncdf4)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir   <- paste0(mmx_home, "/base_collection")
ws_dir   <- paste0(mmx_home, "/working_set")
ext      <- extent(-119, -97.1, 23.9, 40.8)
mask     <- raster(paste0(mmx_home, "/mask.asc"))
files    <- list.files(bc_dir, pattern="1988")   # <<< insert year here!
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
s <- raster(r)
res(s) <- min(res(s))
s = resample(r, s,  method='bilinear')
c <- crop(s, ext)
m <- mask(c, mask)
writeRaster(m, filename=paste0(ws_dir, "/", var, ".asc"), format="ascii", overwrite=TRUE)
}
gsub(".nc", ".asc", var)
library(raster)
library(ncdf4)
mmx_home <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX"
bc_dir   <- paste0(mmx_home, "/base_collection")
ws_dir   <- paste0(mmx_home, "/working_set")
ext      <- extent(-119, -97.1, 23.9, 40.8)
mask     <- raster(paste0(mmx_home, "/mask.asc"))
files    <- list.files(bc_dir, pattern="1989")   # <<< insert year here!
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
s <- raster(r)
res(s) <- min(res(s))
s = resample(r, s,  method='bilinear')
c <- crop(s, ext)
m <- mask(c, mask)
writeRaster(m, filename=paste0(ws_dir, "/", gsub(".nc", ".asc", var)), format="ascii", overwrite=TRUE)
}
library(raster)
library(ncdf4)
bc_dir   <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX/base_collection"
ws_dir   <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Experiments/Exp102/WS_TimeSeries_Year"
mask     <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Experiments/Exp102/_mask.asc"
ext      <- extent(-119, -97.1, 23.9, 40.8)
year     <- 1989                                 # <<< insert year here!
files    <- list.files(bc_dir, pattern="1989")   # <<< insert year here!
files
files
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
s <- raster(r)
res(s) <- min(res(s))
s = resample(r, s,  method='bilinear')
c <- crop(s, ext)
m <- mask(c, mask)
mkdir(paste0(ws_dir, "/", year))
writeRaster(m, filename=paste0(ws_dir, "/", gsub(".nc", ".asc", var)), format="ascii", overwrite=TRUE)
}
mask
plot(mask)
mask     <- raster("/Users/jschnase/Dropbox/MMX-Project/MMX-Experiments/Exp102/_mask.asc")
mask
plot(mask)
library(raster)
library(ncdf4)
bc_dir   <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX/base_collection"
ws_dir   <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Experiments/Exp102/WS_TimeSeries_Year"
mask     <- raster("/Users/jschnase/Dropbox/MMX-Project/MMX-Experiments/Exp102/_mask.asc")
ext      <- extent(-119, -97.1, 23.9, 40.8)
year     <- 1989                                 # <<< insert year here!
files    <- list.files(bc_dir, pattern="1989")   # <<< insert year here!
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
s <- raster(r)
res(s) <- min(res(s))
s = resample(r, s,  method='bilinear')
c <- crop(s, ext)
m <- mask(c, mask)
mkdir(paste0(ws_dir, "/", year))
writeRaster(m, filename=paste0(ws_dir, "/", gsub(".nc", ".asc", var)), format="ascii", overwrite=TRUE)
}
dir.create(paste0(ws_dir, "/", year))
writeRaster(m, filename=paste0(ws_dir, "/", gsub(".nc", ".asc", var)), format="ascii", overwrite=TRUE)
writeRaster(m, filename=paste0(ws_dir, "/", year, "/", gsub(".nc", ".asc", var)), format="ascii", overwrite=TRUE)
library(raster)
library(ncdf4)
bc_dir   <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Development/MMX/base_collection"
ws_dir   <- "/Users/jschnase/Dropbox/MMX-Project/MMX-Experiments/Exp102/WS_TimeSeries_Year"
mask     <- raster("/Users/jschnase/Dropbox/MMX-Project/MMX-Experiments/Exp102/_mask.asc")
ext      <- extent(-119, -97.1, 23.9, 40.8)
year     <- 1980                                 # <<< insert year here!
files    <- list.files(bc_dir, pattern="1980")   # <<< insert year here!
for (var in files) {
r <- raster(paste0(bc_dir, "/", var ))
s <- raster(r)
res(s) <- min(res(s))
s = resample(r, s,  method='bilinear')
c <- crop(s, ext)
m <- mask(c, mask)
dir.create(paste0(ws_dir, "/", year))
writeRaster(m, filename=paste0(ws_dir, "/", year, "/", gsub(".nc", ".asc", var)), format="ascii", overwrite=TRUE)
}
